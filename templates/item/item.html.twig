{% extends 'base.html.twig' %}

{% block title %}Item List{% endblock %}

{% block body %}
    {% include 'partials/nav.html.twig' %}
    <div class="container my-5">
        <h1 class="text-center mb-4">Item List</h1>

        <!-- Create New Item Button -->
        <div class="mb-4">
            <button><a href="{{ path('app_item_new') }}">Create New Item</a></button>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                <tr>
                    <th>Image</th>
                    <th>
                        <img src="{{ asset('images/filter.png') }}" alt="" style="width: 20px; margin-left: 5px">
                        {{ knp_pagination_sortable(items,'Name','i.name') }}</th>
                    <th>
                        <img src="{{ asset('images/filter.png') }}" alt="" style="width: 20px; margin-left: 5px">
                        {{ knp_pagination_sortable(items,'Price','i.price') }}</th>
                    <th>
                        <img src="{{ asset('images/filter.png') }}" alt="" style="width: 20px; margin-left: 5px">
                        {{ knp_pagination_sortable(items,'Quantity','i.quantityStock') }}</th>
                    <th>Description</th>
                    <th>
                        <img src="{{ asset('images/filter.png') }}" alt="" style="width: 20px; margin-left: 5px">
                        {{ knp_pagination_sortable(items, 'Category', 'c.name') }}
                    </th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for item in items %}
                    <tr>
                        <!-- Item Image -->
                        <td class="text-center">
                            <div class="card" style="width: 100px;">
                                <img class="card-img-top img-fluid" src="{{ asset(item.imagePath) }}" alt="{{ item.name }}" style="max-width: 100%; height: auto;">
                            </div>
                        </td>

                        <!-- Item Name -->
                        <td class="align-middle">{{ item.name }}</td>

                        <!-- Item Price -->
                        <td class="align-middle">{{ item.price }}</td>

                        <!-- Item Quantity -->
                        <td class="align-middle">{{ item.quantityStock }}</td>

                        <!-- Item Description -->
                        <td class="align-middle">{{ item.description }}</td>

                        <!-- Item Category -->
                        <td class="align-middle">{{ item.category.name }}</td>

                        <!-- Actions -->
                        <td class="align-middle text-center">
                            <button><a href="{{ path('app_item_edit', {id: item.id}) }}">Edit</a></button>
                            <button><a href="{{ path('app_item_delete', {id: item.id}) }}" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a></button>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        {{ knp_pagination_render(items) }}
    </div>
{% endblock %}
