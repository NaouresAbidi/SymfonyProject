{% extends 'base.html.twig' %}

{% block title %}Item List{% endblock %}

{% block body %}
    <div class="container my-5">
        <h1 class="text-center mb-4">Item List</h1>

        <!-- Create New Item Button -->
        <div class="mb-4">
            <button><a href="{{ path('app_item_new') }}">Create New Item</a></button>
        </div>
        <!-- Advanced Filters -->
        <form method="get" action="{{ path('app_item_index') }}" class="mb-4">
            <div class="row g-3">
                <!-- Filter by Name -->
                <div class="col-md-3">
                    <input type="text" name="name" value="{{ app.request.get('name') }}" class="form-control" placeholder="Search by Name">
                </div>

                <!-- Filter by Price Range -->
                <div class="col-md-3">
                    <div class="input-group">
                        <input type="number" name="price_min" value="{{ app.request.get('price_min') }}" class="form-control" placeholder="Min Price">
                        <input type="number" name="price_max" value="{{ app.request.get('price_max') }}" class="form-control" placeholder="Max Price">
                    </div>
                </div>

                <!-- Filter by Quantity -->
                <div class="col-md-2">
                    <input type="number" name="quantity" value="{{ app.request.get('quantity') }}" class="form-control" placeholder="Quantity in Stock">
                </div>
                <!-- add categories -->
                <!-- Search Button -->
                <div class="col-md-2">
                    <button type="submit" class="w-100">Search</button>
                </div>
            </div>
        </form>
        <!-- Item Table -->
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Quantity in Stock</th>
                <th>Description</th>
                <th>Category</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for item in items %}
                <tr>
                    <!-- Item Image -->
                    <td class="text-center">
                        <div class="card" style="width: 100px;">
                            <img class="card-img-top img-fluid" src="{{ asset(item.imagePath) }}" alt="{{ item.name }}" style="max-width: 100%; height: auto;">
                        </div>
                    </td>

                    <!-- Item Name -->
                    <td class="align-middle">{{ item.name }}</td>

                    <!-- Item Price -->
                    <td class="align-middle">{{ item.price }}</td>

                    <!-- Item Quantity -->
                    <td class="align-middle">{{ item.quantityStock }}</td>

                    <!-- Item Description -->
                    <td class="align-middle">{{ item.description }}</td>

                    <!-- Item Category -->
                    <td class="align-middle">{{ item.category.name }}</td>

                    <!-- Actions -->
                    <td class="align-middle text-center">
                        <button><a href="{{ path('app_item_edit', {id: item.id}) }}">Edit</a></button>
                        <button><a href="{{ path('app_item_delete', {id: item.id}) }}" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a></button>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
